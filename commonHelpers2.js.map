{"version":3,"file":"commonHelpers2.js","sources":["../src/js/storage.js","../src/images/books-stack-mobile.png","../src/images/books-stack.png","../src/shopping-list.js"],"sourcesContent":["export const STORAGE_KEY = 'storage-of-books';\n\nexport const shoppingList = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];\n\nexport function removeBook(bookId) {\n  const updatedShoppingList = shoppingList.filter(book => book._id !== bookId);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedShoppingList));\n  return updatedShoppingList;\n}\n\nexport function addToStorage(book) {\n  shoppingList.push(book);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(shoppingList));\n}\nexport function handleBookInStorage(data) {\n  const isBookId = shoppingList.find(\n    bookInStorage => bookInStorage._id === data._id\n  );\n\n  if (isBookId) {\n    const dataBookID = document\n      .querySelector('.modal-pop-up-btn')\n      .getAttribute('data_id_of_book');\n    const bookIndex = shoppingList.findIndex(\n      bookInStorage => bookInStorage._id === dataBookID\n    );\n\n    shoppingList.splice(bookIndex, 1);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(shoppingList));\n    document.querySelector('.modal-pop-up-btn').textContent =\n      'Add to shopping list';\n    modalMessage.remove();\n    return;\n  }\n\n  addToStorage(data);\n  document.querySelector('.modal-pop-up-btn').textContent =\n    'Remove from the shopping list';\n  document.querySelector('.modal-pop-up-btn').after(modalMessage);\n}\n","export default \"__VITE_ASSET__610a8eb0__\"","export default \"__VITE_ASSET__97dc1e92__\"","import './js/active-page-link.js';\nimport './js/buttom-switch.js';\nimport './js/active-page-menu.js';\nimport './js/mobile-menu.js';\nimport './js/active-page-link.js';\nimport './js/buttom-switch.js';\nimport './js/active-page-menu.js';\nimport './js/mobile-menu.js';\nimport './js/storage.js';\nimport bookStackImageMobile from './images/books-stack-mobile.png';\nimport bookStackImage from './images/books-stack.png';\n\nconst STORAGE_KEY = 'storage-of-books';\nconst shoppingListUl = document.querySelector('.shopping-list');\n\n//повідомлення про відсутність книг\nconst emptyMessageContainer = document.createElement('div');\nemptyMessageContainer.classList.add('empty-message');\nemptyMessageContainer.innerHTML = `\n  <p>This page is empty, add some books and proceed to order.</p>\n  <img \n    class=\"book-stack-image\"\n    srcset=\"${bookStackImageMobile} 767w, \n            ${bookStackImage} 768w\" \n    sizes=\"(max-width: 767px) 265px, 100vw\" \n    src=\"${bookStackImage}\" \n    alt=\"Empty Book Stack\"  \n  />\n`;\n// отримання збережених книг з localStorage\nasync function getStoredBooks() {\n  try {\n    const storedBooks = await new Promise((resolve, reject) => {\n      const data = localStorage.getItem(STORAGE_KEY);\n      if (data) {\n        resolve(JSON.parse(data));\n      } else {\n        resolve([]);\n      }\n    });\n    return storedBooks;\n  } catch (error) {\n    console.error('Error getting stored books:', error);\n    throw error;\n  }\n}\n// Функція для відображення списку книг\nasync function renderBooks() {\n  try {\n    const storedBooks = await getStoredBooks();\n    shoppingListUl.innerHTML = '';\n    if (Array.isArray(storedBooks) && storedBooks.length > 0) {\n      storedBooks.forEach(book => {\n        const li = document.createElement('li');\n        li.appendChild(createBookCard(book));\n        shoppingListUl.appendChild(li);\n      });\n    } else {\n      // Якщо немає збережених книг, вивести повідомлення про відсутність\n      shoppingListUl.appendChild(emptyMessageContainer);\n    }\n  } catch (error) {\n    console.error('Error rendering books:', error);\n  }\n}\n// Функція для створення карти книги\nfunction createBookCard(book) {\n  const card = document.createElement('div');\n  card.classList.add('book-card');\n  card.innerHTML = `\n    <ul class=\"card-list\">\n      <li class=\"card-book\">\n        <div class=\"information-card\">\n          <div>\n            <img class=\"book-cover\" src=\"${book.image}\" alt=\"${book.title}\" />\n          </div>\n          <div class=\"data-or-books-container\" >\n            <h2 class=\"book-title\">${book.title}</h2>\n            <h3 class=\"book-category\">${book.bookCategory}</h3>\n            <p class=\"book-description\">${book.title}</p>\n            <p class=\"book-author\">${book.author}</p>\n            <ul class=\"market-place-list\">\n              <li class=\"market-link\" width=\"32\" height=\"11\">\n                <img class=\"market-image\" src=\"/images/amazon-logo.png\" alt=\"Marketplace-Image\">\n              </li>\n              <li class=\"market-link\" width=\"16\" height=\"16\">\n                <img class=\"market-image\" src=\"/images/apple-books-logo.png\" alt=\"Marketplace-Image\">\n              </li>\n            </ul>\n            <button class=\"remove-book-btn\" data-book-id=\"${book._id}\">\n              <svg width=\"38\" height=\"38\" class=\"remove-icon\">\n                <use href=\"/images/icons.svg#icon-dump\"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </li>\n    </ul>\n  `;\n  return card;\n}\n// Функція для видалення елемента з localStorage за ID\nasync function removeBookFromLocalStorage(bookId) {\n  try {\n    const storedBooks = await getStoredBooks();\n    const updatedBooks = storedBooks.filter(book => book._id != bookId);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedBooks));\n    renderBooks(updatedBooks);\n  } catch (error) {\n    console.error('Error removing book from localStorage:', error);\n  }\n}\nconst container = document.querySelector('.shopping-list');\ncontainer.addEventListener('click', async event => {\n  const removeButton = event.target.closest('.remove-book-btn');\n  if (removeButton) {\n    const bookId = removeButton.getAttribute('data-book-id');\n    console.log('Remove button clicked for book ID:', bookId);\n    await removeBookFromLocalStorage(bookId);\n  }\n});\nrenderBooks();\n"],"names":["STORAGE_KEY","bookStackImageMobile","bookStackImage","shoppingListUl","emptyMessageContainer","getStoredBooks","resolve","reject","data","error","renderBooks","storedBooks","book","li","createBookCard","card","removeBookFromLocalStorage","bookId","updatedBooks","container","event","removeButton"],"mappings":"yCAAO,MAAMA,EAAc,mBAEC,KAAK,MAAM,aAAa,QAAQA,CAAW,CAAC,ECFxE,MAAeC,EAAA,0DCAAC,EAAA,mDCYTF,EAAc,mBACdG,EAAiB,SAAS,cAAc,gBAAgB,EAGxDC,EAAwB,SAAS,cAAc,KAAK,EAC1DA,EAAsB,UAAU,IAAI,eAAe,EACnDA,EAAsB,UAAY;AAAA;AAAA;AAAA;AAAA,cAIpBH,CAAoB;AAAA,cACpBC,CAAc;AAAA;AAAA,WAEjBA,CAAc;AAAA;AAAA;AAAA,EAKzB,eAAeG,GAAiB,CAC9B,GAAI,CASF,OARoB,MAAM,IAAI,QAAQ,CAACC,EAASC,IAAW,CACzD,MAAMC,EAAO,aAAa,QAAQR,CAAW,EAE3CM,EADEE,EACM,KAAK,MAAMA,CAAI,EAEf,CAAE,CAFc,CAIhC,CAAK,CAEF,OAAQC,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACP,CACH,CAEA,eAAeC,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAc,MAAMN,IAC1BF,EAAe,UAAY,GACvB,MAAM,QAAQQ,CAAW,GAAKA,EAAY,OAAS,EACrDA,EAAY,QAAQC,GAAQ,CAC1B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAYC,EAAeF,CAAI,CAAC,EACnCT,EAAe,YAAYU,CAAE,CACrC,CAAO,EAGDV,EAAe,YAAYC,CAAqB,CAEnD,OAAQK,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,CAEA,SAASK,EAAeF,EAAM,CAC5B,MAAMG,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAU,IAAI,WAAW,EAC9BA,EAAK,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKwBH,EAAK,KAAK,UAAUA,EAAK,KAAK;AAAA;AAAA;AAAA,qCAGpCA,EAAK,KAAK;AAAA,wCACPA,EAAK,YAAY;AAAA,0CACfA,EAAK,KAAK;AAAA,qCACfA,EAAK,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DASYA,EAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAU3DG,CACT,CAEA,eAAeC,EAA2BC,EAAQ,CAChD,GAAI,CAEF,MAAMC,GADc,MAAMb,KACO,OAAOO,GAAQA,EAAK,KAAOK,CAAM,EAClE,aAAa,QAAQjB,EAAa,KAAK,UAAUkB,CAAY,CAAC,EAC9DR,EAAYQ,CAAY,CACzB,OAAQT,EAAO,CACd,QAAQ,MAAM,yCAA0CA,CAAK,CAC9D,CACH,CACA,MAAMU,EAAY,SAAS,cAAc,gBAAgB,EACzDA,EAAU,iBAAiB,QAAS,MAAMC,GAAS,CACjD,MAAMC,EAAeD,EAAM,OAAO,QAAQ,kBAAkB,EAC5D,GAAIC,EAAc,CAChB,MAAMJ,EAASI,EAAa,aAAa,cAAc,EACvD,QAAQ,IAAI,qCAAsCJ,CAAM,EACxD,MAAMD,EAA2BC,CAAM,CACxC,CACH,CAAC,EACDP,EAAa"}