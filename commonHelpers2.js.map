{"version":3,"file":"commonHelpers2.js","sources":["../src/images/books-stack-mobile.png","../src/images/books-stack.png","../src/shopping-list.js"],"sourcesContent":["export default \"__VITE_ASSET__610a8eb0__\"","export default \"__VITE_ASSET__97dc1e92__\"","import './js/active-page-link.js';\nimport './js/active-page-menu.js';\nimport './js/mobile-menu.js';\nimport './js/active-page-link.js';\nimport './js/active-page-menu.js';\nimport './js/mobile-menu.js';\nimport './js/storage.js';\nimport './js/dark-theme.js';\nimport bookStackImageMobile from './images/books-stack-mobile.png';\nimport bookStackImage from './images/books-stack.png';\nimport amazonLogo from './images/amazon-logo.png';\nimport appleBooksLogo from './images/apple-books-logo.png';\n\nimport './js/supporters.js';\n\nconst STORAGE_KEY = 'storage-of-books';\nconst shoppingListUl = document.querySelector('.shopping-list');\n\n//повідомлення про відсутність книг\nconst emptyMessageContainer = document.createElement('div');\nemptyMessageContainer.classList.add('empty-message');\nemptyMessageContainer.innerHTML = `\n  <p>This page is empty, add some books and proceed to order.</p>\n  <img \n    class=\"book-stack-image\"\n    srcset=\"${bookStackImageMobile} 767w, \n            ${bookStackImage} 768w\" \n    sizes=\"(max-width: 767px) 265px, 100vw\" \n    src=\"${bookStackImage}\" \n    alt=\"Empty Book Stack\"  \n  />\n`;\n// отримання збережених книг з localStorage\nasync function getStoredBooks() {\n  try {\n    const storedBooks = await new Promise((resolve, reject) => {\n      const data = localStorage.getItem(STORAGE_KEY);\n      if (data) {\n        resolve(JSON.parse(data));\n      } else {\n        resolve([]);\n      }\n    });\n    return storedBooks;\n  } catch (error) {\n    console.error('Error getting stored books:', error);\n    throw error;\n  }\n}\n// Функція для відображення списку книг\nasync function renderBooks() {\n  try {\n    const storedBooks = await getStoredBooks();\n    shoppingListUl.innerHTML = '';\n    if (Array.isArray(storedBooks) && storedBooks.length > 0) {\n      storedBooks.forEach(book => {\n        const li = document.createElement('li');\n        li.appendChild(createBookCard(book));\n        shoppingListUl.appendChild(li);\n      });\n    } else {\n      // Якщо немає збережених книг, вивести повідомлення про відсутність\n      shoppingListUl.appendChild(emptyMessageContainer);\n    }\n  } catch (error) {\n    console.error('Error rendering books:', error);\n  }\n}\n// Функція для створення карти книги\nfunction createBookCard(book) {\n  const { title, category, list_name, author, _id, buy_links, book_image } =\n    book;\n  const card = document.createElement('div');\n  card.classList.add('book-card');\n\n  card.innerHTML = `\n    <div class=\"card-book\">\n  <img class=\"book-cover\" src=\"${book_image}\" alt=\"${title}\" id=\"${_id}\" />\n  <div class=\"shopping-list-img-description\">\n    <h2 class=\"book-title\">${title}</h2>\n    <h3 class=\"book-category\">${category}</h3>\n    <p class=\"book-description\">${list_name}</p>\n    <p class=\"book-author\">${author}</p>\n    <ul class=\"storage-shops\">\n      <li class=\"list-shop\">\n        <a href=\"${buy_links[0].url}\" target=\"_blank\" class=\"storage-shop-link\">\n          <img class=\"amazon\" width=\"32\" height=\"11\"  src=\"${amazonLogo}\" alt=\"Shop Logo\" />\n        </a>\n      </li>\n      <li class=\"list-shop\">\n        <a href=\"${buy_links[1].url}\" target=\"_blank\" class=\"storage-shop-link\">\n          <img class=\"book-shop\" width=\"16\" height=\"16\" src=\"${appleBooksLogo}\" alt=\"Shop Logo\" />\n        </a>\n      </li>\n    </ul>\n    <button class=\"remove-book-btn\" data-book-id=\"${_id}\">\n      <svg width=\"38\" height=\"38\" class=\"remove-icon\">\n        <use href=\"./images/icons.svg#icon-dump\"></use>\n      </svg>\n    </button>\n  </div>\n</div>\n  `;\n\n  return card;\n}\n// Функція для видалення елемента з localStorage за ID\nasync function removeBookFromLocalStorage(bookId) {\n  try {\n    const storedBooks = await getStoredBooks();\n    const updatedBooks = storedBooks.filter(book => book._id != bookId);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedBooks));\n    renderBooks(updatedBooks);\n  } catch (error) {\n    console.error('Error removing book from localStorage:', error);\n  }\n}\nconst container = document.querySelector('.shopping-list');\ncontainer.addEventListener('click', async event => {\n  const removeButton = event.target.closest('.remove-book-btn');\n  if (removeButton) {\n    const bookId = removeButton.getAttribute('data-book-id');\n    console.log('Remove button clicked for book ID:', bookId);\n    await removeBookFromLocalStorage(bookId);\n  }\n});\nrenderBooks();\n"],"names":["bookStackImageMobile","bookStackImage","STORAGE_KEY","shoppingListUl","emptyMessageContainer","getStoredBooks","resolve","reject","data","error","renderBooks","storedBooks","book","li","createBookCard","title","category","list_name","author","_id","buy_links","book_image","card","amazonLogo","appleBooksLogo","removeBookFromLocalStorage","bookId","updatedBooks","container","event","removeButton"],"mappings":"gGAAA,MAAeA,EAAA,0DCAAC,EAAA,mDCeTC,EAAc,mBACdC,EAAiB,SAAS,cAAc,gBAAgB,EAGxDC,EAAwB,SAAS,cAAc,KAAK,EAC1DA,EAAsB,UAAU,IAAI,eAAe,EACnDA,EAAsB,UAAY;AAAA;AAAA;AAAA;AAAA,cAIpBJ,CAAoB;AAAA,cACpBC,CAAc;AAAA;AAAA,WAEjBA,CAAc;AAAA;AAAA;AAAA,EAKzB,eAAeI,GAAiB,CAC9B,GAAI,CASF,OARoB,MAAM,IAAI,QAAQ,CAACC,EAASC,IAAW,CACzD,MAAMC,EAAO,aAAa,QAAQN,CAAW,EAE3CI,EADEE,EACM,KAAK,MAAMA,CAAI,EAEf,CAAE,CAFc,CAIhC,CAAK,CAEF,OAAQC,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACP,CACH,CAEA,eAAeC,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAc,MAAMN,IAC1BF,EAAe,UAAY,GACvB,MAAM,QAAQQ,CAAW,GAAKA,EAAY,OAAS,EACrDA,EAAY,QAAQC,GAAQ,CAC1B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,YAAYC,EAAeF,CAAI,CAAC,EACnCT,EAAe,YAAYU,CAAE,CACrC,CAAO,EAGDV,EAAe,YAAYC,CAAqB,CAEnD,OAAQK,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,CAEA,SAASK,EAAeF,EAAM,CAC5B,KAAM,CAAE,MAAAG,EAAO,SAAAC,EAAU,UAAAC,EAAW,OAAAC,EAAQ,IAAAC,EAAK,UAAAC,EAAW,WAAAC,CAAY,EACtET,EACIU,EAAO,SAAS,cAAc,KAAK,EACzC,OAAAA,EAAK,UAAU,IAAI,WAAW,EAE9BA,EAAK,UAAY;AAAA;AAAA,iCAEcD,CAAU,UAAUN,CAAK,SAASI,CAAG;AAAA;AAAA,6BAEzCJ,CAAK;AAAA,gCACFC,CAAQ;AAAA,kCACNC,CAAS;AAAA,6BACdC,CAAM;AAAA;AAAA;AAAA,mBAGhBE,EAAU,CAAC,EAAE,GAAG;AAAA,6DAC0BG,CAAU;AAAA;AAAA;AAAA;AAAA,mBAIpDH,EAAU,CAAC,EAAE,GAAG;AAAA,+DAC4BI,CAAc;AAAA;AAAA;AAAA;AAAA,oDAIzBL,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAS9CG,CACT,CAEA,eAAeG,EAA2BC,EAAQ,CAChD,GAAI,CAEF,MAAMC,GADc,MAAMtB,KACO,OAAOO,GAAQA,EAAK,KAAOc,CAAM,EAClE,aAAa,QAAQxB,EAAa,KAAK,UAAUyB,CAAY,CAAC,EAC9DjB,EAAYiB,CAAY,CACzB,OAAQlB,EAAO,CACd,QAAQ,MAAM,yCAA0CA,CAAK,CAC9D,CACH,CACA,MAAMmB,EAAY,SAAS,cAAc,gBAAgB,EACzDA,EAAU,iBAAiB,QAAS,MAAMC,GAAS,CACjD,MAAMC,EAAeD,EAAM,OAAO,QAAQ,kBAAkB,EAC5D,GAAIC,EAAc,CAChB,MAAMJ,EAASI,EAAa,aAAa,cAAc,EACvD,QAAQ,IAAI,qCAAsCJ,CAAM,EACxD,MAAMD,EAA2BC,CAAM,CACxC,CACH,CAAC,EACDhB,EAAa"}